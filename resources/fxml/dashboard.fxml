<?xml version="1.0" encoding="UTF-8" ?>

<?import javafx.geometry.Insets ?>
<?import javafx.scene.control.* ?>
<?import javafx.scene.image.* ?>
<?import javafx.scene.layout.* ?>
<?import javafx.scene.shape.* ?>

<StackPane fx:id="rootPane" xmlns="http://javafx.com/javafx"
	xmlns:fx="http://javafx.com/fxml"
	fx:controller="com.bankapp.controllers.DashboardController"
	prefWidth="500" prefHeight="900" stylesheets="@../css/dashboard.css">

	<!-- Base layout -->
	<BorderPane fx:id="dashBoardPane" visible="true"
		mouseTransparent="false">

		<!-- bank logo -->
		<top>
			<HBox alignment="CENTER_LEFT" spacing="10"
				styleClass="nav-header">
				<Label text="тиранозавр" styleClass="logo-name" />
				<Label text="| Your trusted savings partner"
					styleClass="logo-msg" />
			</HBox>
		</top>

		<!-- Body Layout -->
		<center>
			<VBox spacing="20" alignment="TOP_CENTER"
				styleClass="phone-layout">

				<!-- Welcome message + profile -->
				<HBox spacing="15" alignment="CENTER_LEFT" styleClass="header">
					<!-- Left section - profile image -->
					<ImageView fx:id="profileImage" fitHeight="50"
						fitWidth="50">
						<clip>
							<Circle radius="25" centerX="25" centerY="25"></Circle>
						</clip>
					</ImageView>

					<!-- Middle text -->
					<VBox alignment="CENTER_LEFT" spacing="3">
						<Label text="Hi" styleClass="welcome-hi" />
						<Label fx:id="userLabel" text="user"
							styleClass="welcome-name" />
						<Label text="Welcome back!" styleClass="welcome-sub" />
					</VBox>

					<!-- Spacer pushes bell icon to the right -->
					<Region HBox.hgrow="ALWAYS" />

					<!-- Notification icon -->
					<StackPane>
						<Button fx:id="notifButton" styleClass="notif-btn">
							<graphic>
								<ImageView fitHeight="24" fitWidth="24"
									preserveRatio="true">
								</ImageView>
								<image>
									<Image url="@../img/bell.png" />
								</image>
							</graphic>
						</Button>
						<!-- red dot overlay -->
						<Region fx:id="notifDot" styleClass="red-dot"
							visible="true" />
					</StackPane>

				</HBox>

				<!-- Bank Card Section -->
				<StackPane styleClass="bank-card">
					<VBox alignment="CENTER_LEFT" spacing="20">
						<Label text="Spar Bank - Unser Bank" styleClass="bank-logo" />
						<Label fx:id="balanceLabel" text="0.00"
							styleClass="balance-amount" />
						<Label fx:id="ibanLabel" text="IBAN: 78..."
							styleClass="iban-text" />
						<Label fx:id="holderLabel" text="Rick"
							styleClass="account-holder" />
					</VBox>
				</StackPane>

				<!-- Actions (Add Money, transfer, exchange, statements) -->
				<VBox spacing="10" alignment="CENTER">
					<padding>
						<Insets top="10" bottom="10" />
					</padding>
					<!-- top 2 buttons -->
					<HBox spacing="20" alignment="CENTER">
						<Button text="Add Money" fx:id="addMoneyBtn"
							styleClass="action-btn" />
						<Button text="Transfer" fx:id="transferBtn"
							styleClass="action-btn" />
						<!--onAction="#handleTransfer" -->
					</HBox>

					<!-- bottom 2 buttons -->
					<HBox spacing="20" alignment="CENTER">
						<Button text="Exchange" fx:id="exchangeMoney"
							styleClass="action-btn" />
						<Button text="Statements" fx:id="bankStatements"
							styleClass="action-btn" />
					</HBox>
				</VBox>

				<!-- Transactions History -->
				<VBox spacing="10" alignment="TOP_CENTER" prefHeight="300"
					prefWidth="350">
					<Label text="Recent Transactions" styleClass="section-title" />
					<ListView fx:id="transactionsList" prefHeight="400"
						prefWidth="350" />
				</VBox>

			</VBox>
		</center>

		<!-- Footer / navigation -->
		<bottom>
			<HBox spacing="40" alignment="CENTER" styleClass="footer-nav">
				<!-- Buttons with labels -->
				<Button fx:id="homeBtn" styleClass="nav-btn">
					<graphic>
						<VBox alignment="CENTER" spacing="2">
							<Label text="🏠" styleClass="nav-icon" />
							<Label text="Home" styleClass="nav-label" />
						</VBox>
					</graphic>
				</Button>

				<Button fx:id="cardsBtn" styleClass="nav-btn">
					<graphic>
						<VBox alignment="CENTER" spacing="2">
							<Label text="💳" styleClass="nav-icon" />
							<Label text="Cards" styleClass="nav-label" />
						</VBox>
					</graphic>
				</Button>

				<Button fx:id="reportsBtn" styleClass="nav-btn">
					<graphic>
						<VBox alignment="CENTER" spacing="2">
							<Label text="💸" styleClass="nav-icon" />
							<Label text="Report" styleClass="nav-label" />
						</VBox>
					</graphic>
				</Button>

				<Button fx:id="accountBtn" styleClass="nav-btn">
					<graphic>
						<VBox alignment="CENTER" spacing="2">
							<Label text="👤" styleClass="nav-icon" />
							<Label text="Account" styleClass="nav-label" />
						</VBox>
					</graphic>
				</Button>

				<!-- <VBox styleClass="nav-VBOX" alignment="CENTER"> <Button fx:id="settingsBtn" 
					text="👤" styleClass="nav-btn" /> <Label text="Account" styleClass="nav-label" 
					/> </VBox> -->
			</HBox>
		</bottom>
	</BorderPane>

	<!-- Transaction Details overlay -->
	<AnchorPane fx:id="transactionDetailsPane"
		styleClass="overlay-pane" visible="false" mouseTransparent="false"
		stylesheets="@../css/transactionPane.css">

		<!-- semi-transparent dark backdrop -->
		<Rectangle fill="rgba(0,0,0,0.45)" AnchorPane.topAnchor="0"
			AnchorPane.bottomAnchor="0" AnchorPane.leftAnchor="0"
			AnchorPane.rightAnchor="0" />

		<!-- actual card -->
		<VBox alignment="TOP_CENTER" spacing="20"
			styleClass="header-container" maxWidth="420"
			AnchorPane.topAnchor="60" AnchorPane.leftAnchor="40"
			AnchorPane.rightAnchor="40" AnchorPane.bottomAnchor="60">

			<!-- header section -->
			<HBox alignment="CENTER_RIGHT" spacing="10"
				styleClass="details-header-bar">
				<Label text="Transaction Details"
					styleClass="details-header-title" />
				<Region HBox.hgrow="ALWAYS" />
				<Button fx:id="closeButton" onAction="#closeDetails" text="x"
					styleClass="close-btn" />
			</HBox>

			<!-- top summary (merchant + amount) -->
			<VBox alignment="CENTER_LEFT" styleClass="transaction-summary">
				<Label fx:id="transactionMerchant" text="Netflix GmbH"
					styleClass="transaction-merchant" />
				<Label fx:id="transactionRef" text="Monthly subscription"
					styleClass="transaction-ref" />
				<Label fx:id="detailsAmount" text="-4.99 €"
					styleClass="amount-added" />
			</VBox>

			<!-- divider line -->
			<Separator />

			<!-- Main section -->
			<GridPane hgap="10" vgap="8" styleClass="transaction-info">
				<columnConstraints>
					<ColumnConstraints halignment="LEFT"
						prefWidth="100" />
					<ColumnConstraints halignment="RIGHT"
						prefWidth="250" />
				</columnConstraints>

				<Label text="Posting date:" GridPane.rowIndex="0"
					styleClass="details-title" />
				<Label fx:id="postingDate" text="09.10.2025"
					GridPane.rowIndex="0" GridPane.columnIndex="1"
					styleClass="details-value" />

				<Label text="Value date:" GridPane.rowIndex="1"
					styleClass="details-title" />
				<Label fx:id="valueDate" text="09.10.2025"
					GridPane.rowIndex="1" GridPane.columnIndex="1"
					styleClass="details-value" />

				<Label text="IBAN:" GridPane.rowIndex="2"
					styleClass="details-title" />
				<Label fx:id="ibanLabel1" text="DE12 3456 7890 1234 5678 90"
					GridPane.rowIndex="2" GridPane.columnIndex="1"
					styleClass="details-value" />

				<Label text="BIC:" GridPane.rowIndex="3"
					styleClass="details-title" />
				<Label fx:id="bicLabel" text="BEVODEBXXX"
					GridPane.rowIndex="3" GridPane.columnIndex="1"
					styleClass="details-value" />

				<Label text="Category:" GridPane.rowIndex="4"
					styleClass="details-title" />
				<Label fx:id="categoryLabel" text="Entertainment"
					GridPane.rowIndex="4" GridPane.columnIndex="1"
					styleClass="details-value" />

				<Label text="Status" GridPane.rowIndex="5"
					styleClass="details-title" />
				<Label fx:id="statusLabel" text="Completed"
					GridPane.rowIndex="5" GridPane.columnIndex="1"
					styleClass="details-value" />
			</GridPane>

			<!-- action buttons -->
			<HBox spacing="20" alignment="CENTER"
				styleClass="details-actions">
				<Button text="Report Issue" fx:id="reportBtn"
					styleClass="secondary-btn" />
				<Button text="Close" fx:id="closeBtn"
					styleClass="primary-btn" onAction="#closeDetails"/>
			</HBox>

		</VBox>
	</AnchorPane>

</StackPane>
